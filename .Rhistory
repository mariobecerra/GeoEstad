options(digits=4)
library(knitr)
library(ggplot2)
library(dplyr)
library(grid)
library(kfigr)
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
theme_nothing <- function(base_size = 12, base_family = "Helvetica")
{
theme_bw(base_size = base_size, base_family = base_family) %+replace%
theme(
#legend.text=element_blank(),
axis.text.x =  element_blank(),
axis.text.y =  element_blank(),
axis.title.x=  element_blank(),
axis.title.y=  element_blank(),
rect             = element_blank(),
line             = element_blank(),
#text             = element_blank(),
axis.ticks.margin = unit(0, "lines")
)
}
rayos <- read.csv('rayositam.csv')
grid <- read.csv('bmgrid3.csv')
pol <- read.table('poligono.txt')
names(pol) <- c('lon', 'lat')
kable(head(rayos), format='latex', caption='Presentación de los datos disponibles')
?kable
kable(head(rayos), format='latex', caption='Presentación de los datos disponibles', align='c')
ggplot(rayos) + geom_point(aes(x=veg9, y=size))
ggplot(rayos) + geom_table(aes(x=veg9, y=size), bin='idenity')
ggplot(rayos) + geom_bar(aes(x=veg9, y=size), bin='idenity')
ggplot(rayos) + geom_point(aes(x=veg9, y=size))
ggplot(rayos) + geom_bar(aes(x=veg9, y=size))
table(cut(rayos.2$size, breaks=3))
rayos <- read.csv('rayositam.csv')
grid <- read.csv('bmgrid3.csv')
pol <- read.table('poligono.txt')
names(pol) <- c('lon', 'lat')
kable(head(rayos), format='latex', caption='Presentación de los datos disponibles', align='c')
rayos$mo2[nchar(rayos$mo)==1]<-paste0(0,rayos$mo[nchar(rayos$mo)==1])
rayos$mo2[nchar(rayos$mo)==2]<-rayos$mo[nchar(rayos$mo)==2]
rayos$day2[nchar(rayos$day)==1]<-paste0(0,rayos$day[nchar(rayos$day)==1])
rayos$day2[nchar(rayos$day)==2]<-rayos$day[nchar(rayos$day)==2]
rayos.2 <- rayos %>% mutate(estac=ifelse(paste0(mo2,day2)<'0621' & paste0(mo2,day2)>='0321', 'Primavera',
ifelse(paste0(mo2,day2)<'0921' & paste0(mo2,day2)>='0621', 'Verano',
ifelse(paste0(mo2,day2)<'1221' & paste0(mo2,day2)>='0921', 'Otoño', 'Invierno'))))
rayos.2$elev_cat <- cut(rayos.2$elev, breaks=6)
rayos.2$aspect_cat <- cut(rayos.2$aspect, breaks=6)
table(cut(rayos.2$size, breaks=3))
table(cut(rayos.2$size, breaks=6))
table(cut(rayos.2$size, breaks=10))
min(rayos.2$size)
table(cut(rayos.2$size, breaks=18))
table(cut(rayos.2$size, breaks=quantile(rayos.2$size, probs=(0:15)/15)))
table(cut(rayos.2$size, quantile(rayos.2$size, probs=(0:15)/15)))
table(cut(rayos.2$size, quantile(rayos.2$size, probs=(0:10)/10)))
quantile(rayos.2$size, probs=(0:10)/10)
quantile(rayos.2$size, probs=(0:15)/15)
quantile(rayos.2$size, probs=(0:20)/20)
rayos.2$size_cat <- cut(rayos.2$size, breaks=100)
table(rayos.2$size_cat)
hist(rayos.2$size)
hist(log(rayos.2$size))
ggplot(rayos.2)+geom_bar(aes(log(size)), bin='hist')
qplot(log(rayos.2$size))
ggplot(rayos.2)+geom_histogram(aes(log(size)), bin='hist')
ggplot(rayos.2)+geom_histogram(aes(log(size)))
rayos.2$size_cat <- cut(log(rayos.2$size), breaks=10)
cut(log(rayos.2$size), breaks=10)
log(rayos.2$size)
rayos.2$size[5506]
which(rayos.2$size==max(rayos.2$size))
rayos.2[2148,]
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=size))
ggplot(rayos.2) +  geom_point(aes(x=veg9, y=size))
ggplot(rayos) + geom_point(aes(x=veg9, y=size))
ggplot(rayos) + geom_point(aes(x=veg9, y=size))
ggplot(rayos.2) +  geom_point(aes(x=veg9, y=size))
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=size))
ggplot(rayos.2, breaks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=size))
ggplot(rayos.2, breaks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=log(size)))
ggplot(rayos.2, breaks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=size))
?geom_boxplot
interaction(veg9)
?interaction
interaction(rayos$veg9)
ggplot(rayos.2, breaks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=size, group=interaction(veg9)))
ggplot(rayos.2, breaks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=size, group=veg9))
ggplot(rayos.2, breaks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9))
ggplot(rayos.2, ticks=levels(veg9)) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9))
ggplot(rayos.2, aes(ticks=levels(veg9))) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9))
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9))
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9)) + scale_x_continuous(breaks = levels(veg9))
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9)) + scale_x_continuous(breaks = levels(rayos.2$veg9))
levels(rayos.2$levels)
levels(factor(rayos.2$levels))
levels(rayos.2$veg9)
unique(rayos.2$veg9)
levels(factor(rayos.2$veg9))
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9)) + scale_x_continuous(breaks = levels(factor(rayos.2$veg9)))
ggplot(rayos.2) +  geom_boxplot(aes(x=veg9, y=log(size), group=veg9)) + scale_x_continuous(breaks = sort(unique(rayos.2$veg9)))
which(rayos.2$size==max(rayos.2$size))
rayos.2[2148,]
table(cut(rayos.2$aspect, breaks=6))
table(cut(rayos.2$size, breaks=6))
table(cut(rayos.2$size[rayos.2$size<9000], breaks=6))
table(cut(rayos.2$size[rayos.2$size<1000], breaks=6))
table(cut(rayos.2$size[rayos.2$size<100], breaks=6))
sum(rayos.2$size==0)
sum(rayos.2$size<5)
sum(rayos.2$size<4)
sum(rayos.2$size<3)
sum(rayos.2$size<2)
sum(rayos.2$size<1)
sum(rayos.2$size==1)
?variog
library(geoR)
?variog
load('../Scripts/Datos Clase 1.RData')
teprom.ene
options(digits=4)
library(knitr)
library(ggplot2)
library(dplyr)
library(grid)
library(kfigr)
library(geoR)
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
theme_nothing <- function(base_size = 12, base_family = "Helvetica")
{
theme_bw(base_size = base_size, base_family = base_family) %+replace%
theme(
#legend.text=element_blank(),
axis.text.x =  element_blank(),
axis.text.y =  element_blank(),
axis.title.x=  element_blank(),
axis.title.y=  element_blank(),
rect             = element_blank(),
line             = element_blank(),
#text             = element_blank(),
axis.ticks.margin = unit(0, "lines")
)
}
rayos <- read.csv('rayositam.csv')
grid <- read.csv('bmgrid3.csv')
pol <- read.table('poligono.txt')
names(pol) <- c('lon', 'lat')
kable(head(rayos), format='latex', caption='Presentación de los datos disponibles', align='c')
rayos$mo2[nchar(rayos$mo)==1]<-paste0(0,rayos$mo[nchar(rayos$mo)==1])
rayos$mo2[nchar(rayos$mo)==2]<-rayos$mo[nchar(rayos$mo)==2]
rayos$day2[nchar(rayos$day)==1]<-paste0(0,rayos$day[nchar(rayos$day)==1])
rayos$day2[nchar(rayos$day)==2]<-rayos$day[nchar(rayos$day)==2]
rayos.2 <- rayos %>% mutate(estac=ifelse(paste0(mo2,day2)<'0621' & paste0(mo2,day2)>='0321', 'Primavera',
ifelse(paste0(mo2,day2)<'0921' & paste0(mo2,day2)>='0621', 'Verano',
ifelse(paste0(mo2,day2)<'1221' & paste0(mo2,day2)>='0921', 'Otoño', 'Invierno'))))
rayos.2$elev_cat <- cut(rayos.2$elev, breaks=6)
rayos.2$aspect_cat <- cut(rayos.2$aspect, breaks=6)
ggplot() +
#geom_polygon(data=pol, aes(x=lon, y=lat), colour='black', fill='white') +
geom_point(data=grid, aes(x=lon, y=lat, colour=elev),inherit.aes=FALSE) +
scale_colour_gradient(low = "dark green", high = "chartreuse", name='Elevación del\nterreno') +
geom_point(data=rayos, aes(x=lon, y=lat, size=size), colour='black', alpha=0.6, inherit.aes=FALSE) +
guides(size=guide_legend('Tamaño del\nincendio')) +
coord_fixed() + theme_nothing()
# ggplot(pol, aes(x=lon, y=lat)) + geom_polygon(colour='black', fill='white') +
#     geom_point(data=rayos, aes(x=lon, y=lat, colour=elev, size=size), inherit.aes=FALSE) +
#     scale_colour_gradient(low = "dark green", high = "light green", name='Elevación del\nterreno') +
#     guides(size=guide_legend('Tamaño')) +
#     coord_fixed() + theme_nothing()
rayos_veg_elev <- rayos.2 %>% group_by(elev_cat, veg9) %>% summarise(Número=n())
ggplot(rayos_veg_elev, aes(x=elev_cat, y=Número)) + xlab('Elevación') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
ggplot() +
geom_point(data=grid, aes(x=lon, y=lat, colour=elev),inherit.aes=FALSE) +
scale_colour_gradient(low = "dark green", high = "chartreuse", name='Elevación del\nterreno') +
geom_point(data=rayos, aes(x=lon, y=lat, size=size), colour='black', alpha=0.6, inherit.aes=FALSE) +
guides(size=guide_legend('Tamaño del\nincendio')) +
coord_fixed() + theme_nothing()  + facet_wrap(~yr)
ggplot(rayos_veg_elev, aes(x=factor(veg9), y=Número)) + xlab('Tipo de vegetación') + ylab('Número de incendios') + geom_bar(stat='identity')
# rayos_mensual <- rayos %>% group_by(yr, mo) %>% summarise(Número=n())
# ggplot(rayos_mensual, aes(x=yr, y=Número, fill=factor(mo))) + xlab('Año') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Mes'))
rayos_mensual.2 <- rayos.2 %>% group_by(yr, estac) %>% summarise(Número=n())
ggplot(rayos_mensual.2, aes(x=yr, y=Número, fill=factor(estac))) + xlab('Año') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Estación'))
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n())
rayos.estacion.veg
ggplot(rayos.estacion.veg, aes(x=veg9, y=estac)) + geom_bar(stat='identity)
ggplot(rayos.estacion.veg, aes(x=veg9, y=estac)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=veg9, y=Número, fill=estac)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=estac, y=Número, fill=veg9)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=estac, y=Número, fill=factor(veg9))) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=veg9, y=Número, fill=estac)) + geom_bar(stat='identity') + xlab('Tipo de vegetación') + ylab('Número de incendios')
rayos.estacion.veg
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n(), prop=n()/sum)
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n(), prop=n()/sum(n))
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n(), prop=n/sum(n))
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=n/sum(n))
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
rayos.estacion.veg
sum(rayos.estacion.veg$prop)
ggplot(rayos.estacion.veg, aes(x=veg9, y=prop, fill=estac)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=veg9)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity')
rayos.estacion.veg <- rayos.2 %>% group_by(veg9, estac) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
ggplot(rayos.estacion.veg, aes(x=veg9, y=prop, fill=estac)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=veg9, y=estac, fill=estac)) + geom_bar(stat='identity')
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
ggplot(rayos.estacion.veg, aes(x=veg9, y=estac, fill=estac)) + geom_bar(stat='identity')
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
ggplot(rayos.estacion.veg, aes(x=veg9, y=estac, fill=estac)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=veg9, y=prop, fill=estac)) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity')
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación'))
library(GGTHEMES)
library(ggthemes)
install.packages('ggthemes')
library(ggthemes)
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_colour_colorblind()
show_col(colorblind_pal()(8))
library(scales)
show_col(colorblind_pal()(8))
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación'))+ scale_colour_colorblind()
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación'))+ scale_fill_colorblind()
ggplot(rayos_mensual.2, aes(x=yr, y=Número, fill=factor(estac))) + xlab('Año') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Estación'))
ggplot(rayos_mensual.2, aes(x=yr, y=Número, fill=factor(estac))) + xlab('Año') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Estación')) + scale_fill_colorblind()
ggplot(rayos_veg_elev, aes(x=factor(veg9), y=Número)) + xlab('Tipo de vegetación') + ylab('Número de incendios') + geom_bar(stat='identity')
ggplot(rayos_veg_elev, aes(x=elev_cat, y=Número)) + xlab('Elevación') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind()
ggthemes_data$colorblind
class(ggthemes_data$colorblind)
names(ggthemes_data$colorblind)
ggthemes_data$colorblind
append(ggthemes_data$colorblind, "jnsd")
append(ggthemes_data$colorblind, "#D3D3D3")
show_col(append(ggthemes_data$colorblind, "#D3D3D3"))
show_col(append(ggthemes_data$colorblind, "#7ff9df"))
show_col(append(ggthemes_data$colorblind, "#7FF9DF"))
show_col(append(ggthemes_data$colorblind, "#b03f5c"))
show_col(append(ggthemes_data$colorblind, "#80f7e9"))
ggthemes_data$colorblind <- append(ggthemes_data$colorblind, "#80f7e9")
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind()
ggthemes_data$colorblind
ggthemes_data$colorblind <- append(ggthemes_data$colorblind, "#80f7e9")
assignInNamespace("ggthemes_data", ggthemes_data, ns="ggthemes")
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind()
empty_background <- function(base_size = 12, base_family = "Helvetica")
{
theme_bw(base_size = base_size, base_family = base_family) %+replace%
theme(
#legend.text=element_blank(),
rect             = element_blank(),
line             = element_blank(),
#text             = element_blank(),
axis.ticks.margin = unit(0, "lines")
)
}
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
empty_background <- function(base_size = 12, base_family = "Helvetica")
{
theme_bw(base_size = base_size, base_family = base_family) %+replace%
theme(
#legend.text=element_blank(),
rect             = element_blank(),
#line             = element_blank(),
#text             = element_blank(),
axis.ticks.margin = unit(0, "lines")
)
}
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
empty_background <- function(base_size = 12, base_family = "Helvetica")
{
theme_bw(base_size = base_size, base_family = base_family) %+replace%
theme(
#legend.text=element_blank(),
rect             = element_blank(),
#line             = element_blank(),
#text             = element_blank(),
#axis.ticks.margin = unit(0, "lines")
)
}
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
empty_background <- function(base_size = 12, base_family = "Helvetica")
{
theme_bw(base_size = base_size, base_family = base_family) %+replace%
theme(
#legend.text=element_blank(),
#rect             = element_blank(),
#line             = element_blank(),
#text             = element_blank(),
axis.ticks.margin = unit(0, "lines")
)
}
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
sum(rayos.2$estac=='Invierno')
rayos.estacion.veg <- rayos.2[rayos.2$estac!='Invierno'] %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
rayos.estacion.veg <- rayos.2[rayos.2$estac!='Invierno',] %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
rayos.estacion.veg <- rayos.2 %>% group_by(estac, veg9) %>% summarize(Número=n()) %>% mutate(prop=Número/sum(Número))
ggplot(rayos.estacion.veg, aes(x=estac, y=prop, fill=factor(veg9))) + geom_bar(stat='identity') + xlab('Estación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('Tipo de\nvegetación')) + scale_fill_colorblind() + empty_background()
sum(rayos.2$estac=='Invierno')
sum(rayos.2$estac=='Invierno' & rayos.2$veg9==3)
rayos_elev_temp <- rayos.2 %>% group_by(elev_cat, yr) %>% summarise(Número=n())
rayos_elev_temp
ggplot(rayos_veg_elev, aes(x=elev_cat, y=Número)) + xlab('Elevación') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Número)) + xlab('Elevación') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Número)) + xlab('Elevación') + ylab('Número de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) + facet_wrap(~yr)
rayos_elev_temp <- rayos.2 %>% group_by(elev_cat, yr) %>% summarise(Número=n()) %>% Proporción=Número/sum(Número)
rayos.2 %>% group_by(elev_cat, yr) %>% summarise(Número=n()) %>% Proporción=Número/sum(Número)
rayos_elev_temp <- rayos.2 %>% group_by(elev_cat, yr) %>% summarise(Número=n()) %>% mutate(Proporción=Número/sum(Número))
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Proporción)) + xlab('Elevación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) + facet_wrap(~yr)
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Proporción)) + xlab('Elevación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
rayos_elev_temp <- rayos.2 %>% group_by(yr, elev_cat) %>% summarise(Número=n()) %>% mutate(Proporción=Número/sum(Número))
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Proporción)) + xlab('Elevación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Proporción)) + xlab('Elevación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) + facet_wrap(~yr)
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Proporción)) + xlab('Elevación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(rayos_elev_temp, aes(x=elev_cat, y=Proporción)) + xlab('Elevación') + ylab('Proporción de incendios') + geom_bar(stat='identity') + guides(fill=guide_legend('hj')) + theme(axis.text.x = element_text(angle = 35, hjust = 1)) + facet_wrap(~yr)
ggplot(rayos_veg_elev, aes(x=factor(veg9), y=Número)) + xlab('Tipo de vegetación') + ylab('Número de incendios') + geom_bar(stat='identity')
rayos_veg <- rayos.2 %>% group_by(veg9) %>% summarize(Número=n())
ggplot(rayos_veg, aes(x=factor(veg9), y=Número)) + xlab('Tipo de vegetación') + ylab('Número de incendios') + geom_bar(stat='identity')
library("readxl", lib.loc="~/R/x86_64-pc-linux-gnu-library/3.1")
??read.xl
read.xls('~/Temp_Linux/datos tarea 3 .xlsx')
read_excel('~/Temp_Linux/datos tarea 3 .xlsx')
mariana <- read_excel('~/Temp_Linux/datos tarea 3 .xlsx')
head(mariana)
marChina -
marChina <- mariana[mariana$ReporterISO3=='China',]
marChina
unique(mariana$ReporterISO3)
unique(mariana$ReporterName)
tail(mariana)
mariana <- read_excel('~/Temp_Linux/datos tarea 3 .xlsx')
tail(mariana)
marChina <- mariana[mariana$PartnerISO3=='CHN',]
marChina
marMex <- mariana[mariana$PartnerISO3=='MEX',]
marDif <- setdiff(marMex$ProductDescription, marChina$ProductDescription)
marDif
marDifChinaMex <- setdiff(marChina$ProductDescription, marMex$ProductDescription)
marDifChinaMex
write.csv(marDifMexChina, file='~/Temp_Linux/Productos que tiene México pero China no.csv', row.names=FALSE, col.names=FALSE)
marDifMexChina <- setdiff(marMex$ProductDescription, marChina$ProductDescription)
write.csv(marDifMexChina, file='~/Temp_Linux/Productos que tiene México pero China no.csv', row.names=FALSE, col.names=FALSE)
write.csv(marDifChinaMex, file='~/Temp_Linux/Productos que tiene China pero México no.csv', row.names=FALSE, col.names=FALSE)
rm(Marian)
rm(Mariana)
rm(mariana)
rm(marDif)
rm(marChina)
rm(marDifChinaMex)
rm(marDifMexChina)
rm(marMex)
?as.ppp
library(spatstat)
?as.ppp
?quadrantcount
?quadratcount
names(rayos.2)
quadratcount(as.ppp(cbind(rayos.2$lon,rayos.2$lat)),nx=50,ny=50)
plot(pol)
quadratcount(as.ppp(cbind(rayos.2$lon,rayos.2$lat), pol),nx=50,ny=50)
owin(pol)
?owin
head(pol)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)),poly=pol)
list(pol)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)),poly=pol)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat))l)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)))
w
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)), pol)
w
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)), pol)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)), poly=pol)
head(pol)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)), poly=as.data.frame(pol))
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)), poly=as.matrix(pol))
as.matrix(pol)
head(pol)
min(pol$lon
)
max(pol$lon)
w<-owin(poly=as.matrix(pol))
plot(pol, 'l')
plot(pol, 'lines')
plot(pol, type='l')
head(rev(pol))
tail(pol)
w<-owin(xrange=c(min(pol$lon),max(pol$lon)),yrange=c(min(pol$lat),max(pol$lat)), poly=as.matrix(rev(pol)))
w<-owin(poly=as.matrix(rev(pol)))
w
plot(w)
plot %>% arrange(-row_number())
pol %>% arrange(-row_number())
head(pol)
head(pol) %>% head
pol %>% arrange(-row_number()) %>% head
pol.2 <- pol %>% arrange(-row_number())
w<-owin(poly=as.matrix(pol.2)
)
plot(w)
qcount <- quadratcount(as.ppp(cbind(rayos.2$lon,rayos.2$lat), w),nx=50,ny=50)
qcount
plot(qcount)
qqq<-as.numeric(cudrantcount)
qqq<-as.numeric(qcount)
var(qqq)/mean(qqq)
